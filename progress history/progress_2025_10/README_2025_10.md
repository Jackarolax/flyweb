# FlyWeb: Autonomous Drone Delivery Prototype

This project documents the ongoing development of FlyWeb, a startup aimed at revolutionizing last-mile delivery through autonomous drone technology. The current focus is on iterating a robust, long-range drone platform capable of carrying a meaningful payload.

## Project Progress

The foundation of a reliable delivery network is a robust drone. The first major milestone was the design and construction of a large-scale, custom quadcopter to explore the capabilities and challenges of an X-class (10 inch) UAV platform.

The project has since evolved into a hexacopter frame for increased lift capacity and redundancy, maintaining a 10-inch propeller diameter to carry a payload.

### First Hexacopter Prototype & Initial Tests

The initial build served as a practical testbed, deliberately using very cost-effective motors to evaluate their suitability for this application.

**First 10-inch Hexacopter Prototype:**
<p align="left">
  <img src="./media_2025_10/10 inch hex old motors.jpg" width="500"/>
</p>

The first test was done with the previously built 6s2p 21700 8Ah 80A pack achieving ~20min of flight time with a range of 13.3km.

**Initial Flight Test:**
<p align="left">
  <img src="./media_2025_10/10 inch hex old motors flying.jpg" alt="Hex Drone in flight" height="400"/>
  <img src="./media_2025_10/10_inch_hex_old_motors_flying.gif" height="400"/>
</p>

**First-Person View (FPV) from the flight:**
<p align="left">
  <img src="./media_2025_10/hex fpv feed old motors end.jpg" height="350"/>
</p>

> **Note on Data:** The current meter was not fully calibrated, so the amp reading is inaccurate. However, the distance was measured via GPS and is considered accurate.

### Custom High-Capacity Battery Development

With the added motors a higher capacity Li-ion battery is better suited.

**18650 6S4P Pack (12000mAh, 120A Continuous Discharge):**
<p align="left">
  <img src="./media_2025_10/6s4p backside.jpg" height="300"/>
  <img src="./media_2025_10/6s4p frontside.jpg" height="300"/>
  <img src="./media_2025_10/6s4p finished.jpg" height="300"/>
</p>

### Custom-Manufactured Tilt Gimbal

For a better view during package delivery approaches, a tilt gimbal for the FPV camera was built and integrated. The design is based on an open-source concept from [Medlin Drone](https://medlindrone.com/2022/12/22/whoop-fpv-gimbal/).

<p align="left">
  <img src="./media_2025_10/gimbal facing up.jpg" height="200"/>
  <img src="./media_2025_10/gimbal facing down.jpg" height="200"/>
</p>

### Motor Upgrade

The original 2212 (930kv) motors were swapped for higher-quality 2812 (900kv) motors, which feature significantly lower phase wire resistance.

<p align="left">
  <img src="./media_2025_10/10 inch hex new motors.jpg" width="500"/>
</p>

## Long-Range Payload Carrying Test

<p align="left">
  <img src="./media_2025_10/10 inch hex new motors with payload.jpg" height="300"/>
</p>

The upgraded platform successfully validated its payload capacity by carrying **435g** on a flight covering **16.8 km**, completely draining the custom 12Ah battery.


**First-Person View (FPV) from the flight:**
<p align="left">
  <img src="./media_2025_10/hex fpv feed end.png" height="350"/>
</p>

> **Note on Data:** The current meter was not fully calibrated, so the amp reading is inaccurate. However, the distance was measured via GPS and is considered accurate.

**Conclusion**

While this range is promising, using 100% of the battery charge limits the practical delivery radius to ~8km with no safety margin. Nevertheless, this flight is a strong proof-of-concept for the platform's capabilities.


## Key Learnings

### 1. Proper Understanding of Tuning

While PID controller theory is straightforward, practical tuning using blackbox logs is a complex, hands-on process. After significant analysis and iteration, I successfully eliminated dangerous oscillations that cause motor overheating and flyaways.

A useful analogy is to think of a drone frame like a metal fence. As a child, you might have wiggled a fence until it swung easily. On a drone, these structural oscillations confuse the PID controller (especially the D-term), causing motors to rapidly change speed and overheat.

*   **First, Target the Frame:** The ideal solution is always to increase frame rigidity, eliminating the source of the wobble entirely.
*   **Then, Apply Surgical Filtering:** Since my current frame's structure is a fixed variable, I moved to the software. This involved deploying a combination of **notch, low-pass, and D-term filters** to act like a shock absorber, surgically canceling out the specific, low-frequency oscillations inherent to a large drone with slow-spinning propellers.
*   **Finally, Tune the PID Controller:** Only with a clean signal from the filters could the PID controller be tuned effectively. The significant mass of this platform required a substantial increase in P and D gains to achieve the authoritative control needed for stable flight.


Here is the tune I used. the filtering and PIDs are more on the conservative side
<p align="left">
  <img src="./media_2025_10/pid tab.png" height="250"/>
  <img src="./media_2025_10/filter tab.png" height="250"/>
</p>

> **Note:** I am no expert yet, so the tune is far from optimized.

### 2. Does motor price matter?

This build deliberately compared very inexpensive motors (€3 each) against better, cost-effective ones (€8 each). The results were illuminating.

While the more expensive motors were generally more efficient, motor efficiency is highly dependent on throttle position. The efficiency curve resembles a reverse "Nike Swoosh," with a "sweet spot" at 20-30% throttle. While a drone with cheaper motors could theoretically outperform better motors at its sweet spot, adding a payload forces the motors to operate at a higher, less efficient throttle position. In practice, this makes the better motors a necessity for payload-carrying applications.
<p align="left">
  <img src="./media_2025_10/Motor efficiency graph.jpg" height="250"/>
</p>
Furthermore, the cheaper motors introduced a major practical issue: poor manufacturing consistency led to poorly centered rotors, which caused significant vibrations. These vibrations added noise to the system affecting the overall tune.

### 3. Major improvements through decreasing top performance

Motors are highly inefficient at high throttle. By software-limiting the maximum throttle output to 70-80%, the drone draws less than half of its peak power while retaining most of its lift capability. This strategy has major cascading benefits:

*   **Increased Flight Efficiency:** The system operates in a more efficient part of the throttle curve.
*   **Cost & Weight Reduction:** It allows the use of lower-rated, cheaper ESCs (30A instead of 60A+).
*   **Simplified Power Delivery:** The peak current demand is drastically reduced from a potential 360A, making the electrical system more manageable.

However, one key constraint remains: even with this throttle limit, the sustained current draw still requires the use of high-C rated Li-ion cells. The trade-off for this high discharge rate is a lower overall cycle life compared to standard cells as stated in the key learnings from September.

### TL;DR: Key Learnings

*   **Tuning:** Larger drones need lower-frequency filtering and higher P/D gains for stability.
*   **Motors:** Price doesn't scale linearly with performance, but better motors offer crucial real-world efficiency and reliability.
*   **Performance cap:** Limiting top power creates cascading benefits for cost, weight, and overall system feasibility.

## Next Steps

My next step is to transition the flight controller firmware from Betaflight to iNav. This upgrade unlocks critical autonomous flight modes—such as position hold, altitude hold, and mission planning—which are fundamental for developing a true delivery platform.
<p align="left">
  <img src="./media_2025_10/inav logo.png" width="300"/>
</p>


